# Crossmatch
Match current entries against some other input entries and take action on matches.


| **Option** | **Description** |
| --- | --- |
| from | List of input plugins |
| fields | List of entry fields which are matched from current task against entries generated by the plugins in `from` option |
| action | `accept` or `reject` |

### Reject movies rated in imdb
Reject movies that you have already voted on imdb. Aka old imdb_rated functionality.

```
crossmatch:
  from:
    - imdb_list:
        user_id: ur9999999
        list: ratings
  fields:
    - imdb_id
  action: reject
```

You will also need to enable [imdb_lookup](/Plugins/imdb_lookup) on the feed in order to get imdb_id populated. Granted, this is a lot more complicated than old imdb_rated used to be, but crossmatch allows all kinds of other clever uses as well.

### Organize movies you rated badly
You could use [delete](/Plugins/delete) at your own risk.

```
tasks:

  sort-rated-movies:
    interval: 1 days
    history: no
    seen: no
    filesystem:
      - /path/to/collection
    imdb_lookup: yes
    crossmatch:
      from:
      - imdb_list:
          list: ratings
          login: '{{ secrets.imdb.login }}'
          password: '{{ secrets.imdb.pwd }}'
      fields:
        - imdb_id
      action: accept
    require_field:
      - imdb_score
      - imdb_user_score
    if:
      - imdb_user_score >= 7: reject
      - imdb_user_score < 7: accept
    move:
      allow_dir: yes
      to: /path/to/crap
```

See [secrets](/Plugins/secrets) plugin

### Cleaning separate download directory, watching files in deluge
This task looks for direct subdirectories inside the specified folder, and checks if they are still present in deluge (for example, if they are still downloading, or if you're maintaining a seed ratio, and it has not been reached yet). This example checks the entry based on the location, in principle you could also check on other fields, for example the title etc, but you'd have to make sure they are correctly set.

This task is useful to remove junk (leftover directory, .info files, ...) that is still present in your download directory even after other plugins/programs have moved the files.
```
tasks:
  clean-download-dir:
    manual: yes
    template: no_global
    disable: seen
    filesystem:
      path: '{{ secrets.paths.movies.downloading }}'
      retrieve: dirs
    set:
      deluge_path: '{{ location }}' #Set this field to the location field, since crossmatch looks for the same named fields
    crossmatch:
      from:
        - from_deluge:
            username: '{{ secrets.deluge.username }}'
            password: '{{ secrets.deluge.password }}'
      fields:
        - deluge_path
      action: reject
    accept_all: yes
    delete:
      allow_dir: yes
```